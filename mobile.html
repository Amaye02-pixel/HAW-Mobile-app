<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>HAWK Mobile</title>

  <link rel="stylesheet" href="./mobile.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

  <!-- ðŸ”¥ MESSAGE BRIDGE (MUST BE BEFORE script.js) -->
  <script>
    window.addEventListener("message", (e) => {
      const { type, email, password } = e.data || {};

      if (type === "login") login(email, password);
      if (type === "signup") signup(email, password);
      if (type === "reset") forgotPassword(email);
      if (type === "google") googleLogin();
    });
  </script>

  <!-- Main JS -->
  <script src="./script.js"></script>
</head>

<body>

<!-- ðŸ” LOGIN -->
<iframe
  id="login-frame"
  src="./mobile-login.html"
  class="screen"
  style="display:none;"
></iframe>

<!-- ðŸ“± APP -->
<div id="app" style="display:none;">

  <header class="app-header">
    <span class="brand">HAWK</span>
    <button onclick="openProfile()">ðŸ‘¤</button>
  </header>

  <iframe
    id="app-frame"
    src="./mobile-home.html"
    class="screen"
  ></iframe>

  <nav class="bottom-nav">
    <button onclick="openHome()">Home</button>
    <button onclick="openProfile()">Profile</button>
    <button onclick="logout()">Logout</button>
  </nav>

</div>

<script>
  function openHome() {
    document.getElementById("app-frame").src = "./mobile-home.html";
  }

  function openProfile() {
    document.getElementById("app-frame").src = "./mobile-profile.html";
  }

  window.showLogin = () => {
    document.getElementById("login-frame").style.display = "block";
    document.getElementById("app").style.display = "none";
  };

  window.showApp = () => {
    document.getElementById("login-frame").style.display = "none";
    document.getElementById("app").style.display = "block";
  };
</script>

</body>
</html>